{"remainingRequest":"/Users/lyn/Desktop/mmdz_ceshi/lyntest-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lyn/Desktop/mmdz_ceshi/lyntest-vue/src/component/layout/side-bar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lyn/Desktop/mmdz_ceshi/lyntest-vue/src/component/layout/side-bar.vue","mtime":1606834545497},{"path":"/Users/lyn/Desktop/mmdz_ceshi/lyntest-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lyn/Desktop/mmdz_ceshi/lyntest-vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lyn/Desktop/mmdz_ceshi/lyntest-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lyn/Desktop/mmdz_ceshi/lyntest-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapGetters } from 'vuex'\nimport Utils from '@/lin/util/util'\nimport Config from '../../config/index'\n\nexport default {\n  data() {\n    return {\n      sidebar: '',\n      groups: [],\n      showSidebarSearch: Config.showSidebarSearch,\n      showSearchList: false,\n    }\n  },\n  inject: ['eventBus'],\n  props: {\n    isPhone: {\n      type: Boolean,\n      default: false,\n    },\n    isCollapse: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  mounted() {\n    this.eventBus.$on('removeSidebarSearch', () => {\n      this.showSidebarSearch = false\n    })\n    this.eventBus.$on('showSidebarSearch', () => {\n      if (Config.showSidebarSearch) {\n        this.showSidebarSearch = true\n      }\n    })\n  },\n  methods: {\n    filterIcon(icon) {\n      return icon.indexOf('/') !== -1\n    },\n    handleChange(val) {\n      this.groups = []\n      this.sidebar = ''\n      this.showSearchList = false\n      this.$router.push(val)\n    },\n    toSearch() {\n      this.showSearchList = true\n      setTimeout(() => {\n        this.$refs.searchInput.focus()\n      }, 200)\n    },\n    search(val) {\n      this.groups = []\n\n      // 深度遍历配置树, 摘取叶子节点作为路由部分\n      function deepTravel(config, fuc) {\n        if (Array.isArray(config)) {\n          config.forEach(subConfig => {\n            deepTravel(subConfig, fuc)\n          })\n        } else if (config.children) {\n          config.children.forEach(subConfig => {\n            deepTravel(subConfig, fuc)\n          })\n        } else {\n          fuc(config)\n        }\n      }\n\n      deepTravel(this.sideBarList, viewConfig => {\n        // 构造舞台view路由\n        if (viewConfig.title.includes(val)) {\n          const viewRouter = {}\n          viewRouter.path = viewConfig.path\n          viewRouter.title = viewConfig.title\n          viewRouter.key = Math.random()\n          this.groups.push(viewRouter)\n        }\n      })\n    },\n  },\n  computed: {\n    elMenuCollapse() {\n      if (this.isPhone) {\n        return false\n      }\n\n      return this.isCollapse\n    },\n    // 根据当前路由设置激活侧边栏\n    defaultActive() {\n      for (let i = this.stageInfo.length - 1; i >= 0; i -= 1) {\n        if (this.idMap[this.stageInfo[i].name]) {\n          return this.idMap[this.stageInfo[i].name]\n        }\n      }\n      return ''\n    },\n    stageInfo() {\n      return this.$store.getters.getStageInfo(this.$route.name)\n    },\n    // 由于index不支持symbol格式, 因此使用 idMap 进行映射\n    idMap() {\n      const { sideBarList } = this\n      const mapData = {}\n      const deepTravel = (obj, fuc) => {\n        if (Array.isArray(obj)) {\n          obj.forEach(item => {\n            deepTravel(item, fuc)\n          })\n          return\n        }\n        if (obj && obj.children) {\n          fuc(obj)\n          deepTravel(obj.children, fuc)\n          return\n        }\n        if (obj.name) {\n          fuc(obj)\n        }\n      }\n      deepTravel(sideBarList, item => {\n        mapData[item.name] = Utils.getRandomStr()\n      })\n\n      return mapData\n    },\n    imgSrc() {\n      return this.elMenuCollapse === false ? '../../assets/image/left-logo.png' : '../../assets/image/logo.png'\n    },\n    ...mapGetters(['sideBarList']),\n  },\n}\n",{"version":3,"sources":["side-bar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4FA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"side-bar.vue","sourceRoot":"src/component/layout","sourcesContent":["<template>\n  <div class=\"app-sidebar\">\n    <!--<div class=\"logo\" v-if=\"!elMenuCollapse\"><img src=\"../../assets/image/logo.png\" alt=\"\" /></div>-->\n    <!--<div class=\"mobile-logo\" v-else><img src=\"../../assets/image/mobile-logo.png\" alt=\"\" /></div>-->\n    <div style=\"margin-bottom:50px\">\n      <div v-if=\"showSidebarSearch\" style=\"margin-top: 15px\">\n        <div class=\"search-display\" v-if=\"!showSearchList\" @click=\"toSearch\"><i class=\"el-icon-search\"></i></div>\n        <el-select\n          v-if=\"showSearchList\"\n          size=\"medium\"\n          filterable\n          clearable\n          :filter-method=\"search\"\n          v-model=\"sidebar\"\n          @change=\"handleChange\"\n          class=\"search\"\n          placeholder=\"请输入关键字\"\n          ref=\"searchInput\"\n        >\n          <el-option v-for=\"item in groups\" :key=\"item.key\" :label=\"item.title\" :value=\"item.path\"> </el-option>\n        </el-select>\n      </div>\n      <el-menu\n        class=\"el-menu-vertical-demo\"\n        ref=\"meun\"\n        :default-active=\"defaultActive\"\n        :collapse=\"elMenuCollapse\"\n        background-color=\"#003C8D\"\n        text-color=\"rgba(196,201,210,1)\"\n        active-text-color=\"#1890ff\"\n      >\n        <template v-for=\"item in sideBarList\">\n          <el-submenu\n            class=\"subMenuContent\"\n            v-if=\"item.children\"\n            :key=\"idMap[item.name]\"\n            :index=\"idMap[item.name]\"\n            popper-class=\"abc\"\n          >\n            <template slot=\"title\">\n              <i v-if=\"!filterIcon(item.icon)\" :class=\"item.icon\"></i> <img v-else :src=\"item.icon\" class=\"imgIcon\" />\n              <span slot=\"title\">{{ item.title }}</span>\n            </template>\n\n            <!-- 二级菜单 -->\n            <template v-for=\"subItem in item.children\">\n              <el-submenu\n                v-if=\"subItem.children\"\n                :key=\"idMap[subItem.name]\"\n                :index=\"idMap[subItem.name]\"\n                class=\"subMenuContent\"\n              >\n                <template slot=\"title\">\n                  <i class=\"iconfont icon-dot\"></i>\n                  <span slot=\"title\" class=\"two-folder\">{{ subItem.title }}</span>\n                </template>\n\n                <!-- 三级菜单 -->\n                <router-link\n                  v-for=\"grandchildItem in subItem.children\"\n                  :key=\"idMap[grandchildItem.name]\"\n                  :to=\"grandchildItem.path\"\n                  class=\"circle third\"\n                >\n                  <el-menu-item :index=\"idMap[grandchildItem.name]\" style=\"padding-left: 80px;\" class=\"subMenuContent\">\n                    {{ grandchildItem.title }}\n                  </el-menu-item>\n                </router-link>\n              </el-submenu>\n              <!-- 二级else -->\n              <router-link :to=\"subItem.path\" :key=\"subItem.name\" class=\"circle\" v-else>\n                <el-menu-item :index=\"idMap[subItem.name]\" style=\"padding-left: 60px;\" class=\"subMenuContent\">\n                  {{ subItem.title }}\n                </el-menu-item>\n              </router-link>\n            </template>\n          </el-submenu>\n\n          <!-- 一级else -->\n          <router-link :to=\"item.path\" :key=\"item.name\" v-else>\n            <el-menu-item class=\"subMenuContent\" :index=\"idMap[item.name]\" :key=\"idMap[item.name]\">\n              <i v-if=\"!filterIcon(item.icon)\" :class=\"item.icon\"></i> <img v-else :src=\"item.icon\" class=\"imgIcon\" />\n              <span slot=\"title\">{{ item.title }}</span>\n            </el-menu-item>\n          </router-link>\n        </template>\n      </el-menu>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport Utils from '@/lin/util/util'\nimport Config from '../../config/index'\n\nexport default {\n  data() {\n    return {\n      sidebar: '',\n      groups: [],\n      showSidebarSearch: Config.showSidebarSearch,\n      showSearchList: false,\n    }\n  },\n  inject: ['eventBus'],\n  props: {\n    isPhone: {\n      type: Boolean,\n      default: false,\n    },\n    isCollapse: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  mounted() {\n    this.eventBus.$on('removeSidebarSearch', () => {\n      this.showSidebarSearch = false\n    })\n    this.eventBus.$on('showSidebarSearch', () => {\n      if (Config.showSidebarSearch) {\n        this.showSidebarSearch = true\n      }\n    })\n  },\n  methods: {\n    filterIcon(icon) {\n      return icon.indexOf('/') !== -1\n    },\n    handleChange(val) {\n      this.groups = []\n      this.sidebar = ''\n      this.showSearchList = false\n      this.$router.push(val)\n    },\n    toSearch() {\n      this.showSearchList = true\n      setTimeout(() => {\n        this.$refs.searchInput.focus()\n      }, 200)\n    },\n    search(val) {\n      this.groups = []\n\n      // 深度遍历配置树, 摘取叶子节点作为路由部分\n      function deepTravel(config, fuc) {\n        if (Array.isArray(config)) {\n          config.forEach(subConfig => {\n            deepTravel(subConfig, fuc)\n          })\n        } else if (config.children) {\n          config.children.forEach(subConfig => {\n            deepTravel(subConfig, fuc)\n          })\n        } else {\n          fuc(config)\n        }\n      }\n\n      deepTravel(this.sideBarList, viewConfig => {\n        // 构造舞台view路由\n        if (viewConfig.title.includes(val)) {\n          const viewRouter = {}\n          viewRouter.path = viewConfig.path\n          viewRouter.title = viewConfig.title\n          viewRouter.key = Math.random()\n          this.groups.push(viewRouter)\n        }\n      })\n    },\n  },\n  computed: {\n    elMenuCollapse() {\n      if (this.isPhone) {\n        return false\n      }\n\n      return this.isCollapse\n    },\n    // 根据当前路由设置激活侧边栏\n    defaultActive() {\n      for (let i = this.stageInfo.length - 1; i >= 0; i -= 1) {\n        if (this.idMap[this.stageInfo[i].name]) {\n          return this.idMap[this.stageInfo[i].name]\n        }\n      }\n      return ''\n    },\n    stageInfo() {\n      return this.$store.getters.getStageInfo(this.$route.name)\n    },\n    // 由于index不支持symbol格式, 因此使用 idMap 进行映射\n    idMap() {\n      const { sideBarList } = this\n      const mapData = {}\n      const deepTravel = (obj, fuc) => {\n        if (Array.isArray(obj)) {\n          obj.forEach(item => {\n            deepTravel(item, fuc)\n          })\n          return\n        }\n        if (obj && obj.children) {\n          fuc(obj)\n          deepTravel(obj.children, fuc)\n          return\n        }\n        if (obj.name) {\n          fuc(obj)\n        }\n      }\n      deepTravel(sideBarList, item => {\n        mapData[item.name] = Utils.getRandomStr()\n      })\n\n      return mapData\n    },\n    imgSrc() {\n      return this.elMenuCollapse === false ? '../../assets/image/left-logo.png' : '../../assets/image/logo.png'\n    },\n    ...mapGetters(['sideBarList']),\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n::-webkit-scrollbar {\n  width: 0px;\n  height: 0px;\n}\n\n.app-sidebar {\n  /*menu的背景色*/\n  background: #003C8D;\n\n  &::-webkit-scrollbar {\n    width: 0px;\n    height: 0px;\n  }\n\n  .subMenuContent {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n\n  .logo {\n    width: $sidebar-width;\n    height: $header-height;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 30px;\n    color: #fff;\n    transition: all 0.5s ease-in-out;\n    background-color: #122150;\n    transition: all 0.3s linear;\n    position: sticky;\n    top: 0;\n    left: 0;\n    z-index: 99;\n    img {\n      width: 120px;\n      transition: all 0.3s linear;\n    }\n  }\n\n  .mobile-logo {\n    width: 64px;\n    height: 86px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-color: #122150;\n    transition: all 0.3s linear;\n\n    img {\n      width: 40px;\n      height: 40px;\n      transition: all 0.3s linear;\n    }\n  }\n\n  .imgIcon {\n    width: 16px;\n    height: 16px;\n    margin-right: 10px;\n    margin-left: 5px;\n    display: inline-block;\n    transform: translateY(21px);\n  }\n\n  .iconfont {\n    margin-right: 10px;\n    margin-left: 5px;\n    color: $submenu-title;\n    height: $menuItem-height;\n  }\n\n  .search-display {\n    position: relative;\n    width: 80%;\n    margin: 0 auto;\n    height: 36px;\n    border-bottom: 1px rgb(185, 190, 195) solid;\n    cursor: pointer;\n\n    .el-icon-search {\n      position: absolute;\n      left: 1px;\n      top: 10px;\n      color: rgb(185, 190, 195);\n    }\n  }\n\n  .search {\n    // margin-top: 20px;\n    width: 80%;\n  }\n}\n</style>\n"]}]}