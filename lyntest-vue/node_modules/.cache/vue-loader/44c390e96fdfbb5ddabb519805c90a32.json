{"remainingRequest":"/Users/lyn/Desktop/lyntest/lyntest-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lyn/Desktop/lyntest/lyntest-vue/src/view/login/login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lyn/Desktop/lyntest/lyntest-vue/src/view/login/login.vue","mtime":1608860439801},{"path":"/Users/lyn/Desktop/lyntest/lyntest-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lyn/Desktop/lyntest/lyntest-vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lyn/Desktop/lyntest/lyntest-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lyn/Desktop/lyntest/lyntest-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapActions, mapMutations } from 'vuex'\nimport User from '@/lin/model/user'\nimport Utils from '@/lin/util/util'\n\nexport default {\n  name: 'login',\n  data() {\n    return {\n      loading: false, // 加载动画\n      wait: 2000, // 2000ms之内不能重复发起请求\n      throttleLogin: null, // 节流登录\n      form: {\n        code: 'test',\n        password: '123456',\n      },\n    }\n  },\n  methods: {\n    async login() {\n      const { code, password } = this.form\n      try {\n        this.loading = true\n        await User.getToken(code, password)\n        await this.getInformation()\n        this.loading = false\n        this.$router.push('/autotest/http')\n        this.$message.success('登录成功')\n      } catch (e) {\n        this.loading = false\n        console.log(e)\n      }\n    },\n    async getInformation() {\n      try {\n        // 尝试获取当前用户信息\n        const user = await User.getPermissions()\n        this.setUserAndState(user)\n        this.setUserPermissions(user.permissions)\n      } catch (e) {\n        console.log(e)\n      }\n    },\n    ...mapActions(['setUserAndState']),\n    ...mapMutations({\n      setUserPermissions: 'SET_USER_PERMISSIONS',\n    }),\n  },\n  created() {\n    // 节流登录\n    this.throttleLogin = Utils.throttle(this.login, this.wait)\n  },\n  components: {},\n}\n",{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/view/login","sourcesContent":["<template>\n  <div class=\"login\">\n    <!--<div class=\"team-name hidden-sm-and-down\"><img src=\"@/assets/image/login/team-name.png\" alt=\"logo\" /></div>-->\n    <div class=\"form-box\" v-loading=\"loading\" element-loading-background=\"rgba(0, 0, 0, 0)\">\n      <div class=\"title\"><h1 title=\"Lin\">接口测试平台</h1></div>\n      <form class=\"login-form\" autocomplete=\"off\" @submit.prevent=\"throttleLogin()\">\n        <div class=\"form-item nickname\">\n          <span class=\"icon account-icon\"></span>\n          <input type=\"text\" v-model=\"form.code\" autocomplete=\"off\" placeholder=\"请填写账号\" />\n        </div>\n        <div class=\"form-item password\">\n          <span class=\"icon secret-icon\"></span>\n          <input type=\"password\" v-model=\"form.password\" autocomplete=\"off\" placeholder=\"请填写用户密码\" />\n        </div>\n        <button class=\"submit-btn\" type=\"submit\">登录</button>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapMutations } from 'vuex'\nimport User from '@/lin/model/user'\nimport Utils from '@/lin/util/util'\n\nexport default {\n  name: 'login',\n  data() {\n    return {\n      loading: false, // 加载动画\n      wait: 2000, // 2000ms之内不能重复发起请求\n      throttleLogin: null, // 节流登录\n      form: {\n        code: 'test',\n        password: '123456',\n      },\n    }\n  },\n  methods: {\n    async login() {\n      const { code, password } = this.form\n      try {\n        this.loading = true\n        await User.getToken(code, password)\n        await this.getInformation()\n        this.loading = false\n        this.$router.push('/autotest/http')\n        this.$message.success('登录成功')\n      } catch (e) {\n        this.loading = false\n        console.log(e)\n      }\n    },\n    async getInformation() {\n      try {\n        // 尝试获取当前用户信息\n        const user = await User.getPermissions()\n        this.setUserAndState(user)\n        this.setUserPermissions(user.permissions)\n      } catch (e) {\n        console.log(e)\n      }\n    },\n    ...mapActions(['setUserAndState']),\n    ...mapMutations({\n      setUserPermissions: 'SET_USER_PERMISSIONS',\n    }),\n  },\n  created() {\n    // 节流登录\n    this.throttleLogin = Utils.throttle(this.login, this.wait)\n  },\n  components: {},\n}\n</script>\n\n<style lang=\"scss\">\n.login {\n  width: 100%;\n  height: 100%;\n  background-size: auto;\n  background: #1b2c5f url('../../assets/image/login/login-ba.png') no-repeat center center;\n\n  .team-name {\n    position: fixed;\n    left: 40px;\n    top: 50%;\n    width: 50px;\n    transform: translateY(-50%);\n  }\n\n  .form-box {\n    position: fixed;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    width: 445px;\n\n    .title {\n      height: 37px;\n      font-size: 30px;\n      line-height: 37px;\n      margin-bottom: 15%;\n\n      h1 {\n        padding-left: 74px;\n        box-sizing: border-box;\n        text-align: left;\n        color: #8c98ae;\n      }\n    }\n\n    .login-form {\n      width: 100%;\n\n      .form-item {\n        width: 100%;\n        height: 40px;\n        box-sizing: border-box;\n        padding-bottom: 13px;\n        margin-bottom: 34px;\n\n        input {\n          width: 100%;\n          height: 100%;\n          background: transparent;\n          color: #c4c9d2;\n          font-size: 14px;\n          padding-left: 74px;\n          box-sizing: border-box;\n        }\n      }\n\n      .form-item.nickname {\n        background: url('../../assets/image/login/nickname.png') no-repeat;\n        background-size: 100% auto;\n        background-position: left bottom;\n      }\n\n      .form-item.password {\n        background: url('../../assets/image/login/password.png') no-repeat;\n        background-size: 100% auto;\n        background-position: left bottom;\n      }\n\n      .submit-btn {\n        width: 100%;\n        height: 70px;\n        color: #c4c9d2;\n        font-size: 16px;\n        text-align: left;\n        box-sizing: border-box;\n        padding: 0 10px;\n        padding-left: 74px;\n        background: url('../../assets/image/login/login-btn.png') no-repeat;\n        background-size: 90% auto;\n        background-position: center bottom;\n        border: none;\n        cursor: pointer;\n      }\n    }\n  }\n\n  .tips {\n    position: fixed;\n    left: 50%;\n    top: 90%;\n    transform: translate(-50%, -50%);\n    width: 300px;\n\n    .text {\n      font-size: 16px;\n      margin-bottom: 15%;\n      text-align: left;\n      color: #73777A;\n    }\n  }\n}\n</style>\n"]}]}